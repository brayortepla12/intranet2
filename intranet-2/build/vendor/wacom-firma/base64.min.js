function StringBuffer(){this.buffer=[]}StringBuffer.prototype.append=function(e){return this.buffer.push(e),this},StringBuffer.prototype.toString=function(){return this.buffer.join("")};var Base64={codex:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){for(var t=new StringBuffer,r=new Utf8EncodeEnumerator(e);r.moveNext();){var n=r.current;r.moveNext();var i=r.current;r.moveNext();var u=r.current,o=n>>2,h=(3&n)<<4|i>>4,s=(15&i)<<2|u>>6,f=63&u;isNaN(i)?s=f=64:isNaN(u)&&(f=64),t.append(this.codex.charAt(o)+this.codex.charAt(h)+this.codex.charAt(s)+this.codex.charAt(f))}return t.toString()},decode:function(e){for(var t=new StringBuffer,r=new Base64DecodeEnumerator(e);r.moveNext();){var n=r.current;if(n<128)t.append(String.fromCharCode(n));else if(n>191&&n<224){r.moveNext();var i=r.current;t.append(String.fromCharCode((31&n)<<6|63&i))}else{r.moveNext();i=r.current;r.moveNext();var u=r.current;t.append(String.fromCharCode((15&n)<<12|(63&i)<<6|63&u))}}return t.toString()},utf8_encode:function(e){return Base64.encode(unescape(encodeURIComponent(e)))},utf8_decode:function(e){return decodeURIComponent(escape(Base64.decode(e)))}};function Utf8EncodeEnumerator(e){this._input=e,this._index=-1,this._buffer=[]}function Base64DecodeEnumerator(e){this._input=e,this._index=-1,this._buffer=[]}Utf8EncodeEnumerator.prototype={current:Number.NaN,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=Number.NaN,!1;var e=this._input.charCodeAt(++this._index);return 13==e&&10==this._input.charCodeAt(this._index+1)&&(e=10,this._index+=2),e<128?this.current=e:e>127&&e<2048?(this.current=e>>6|192,this._buffer.push(63&e|128)):(this.current=e>>12|224,this._buffer.push(e>>6&63|128),this._buffer.push(63&e|128)),!0}},Base64DecodeEnumerator.prototype={current:64,moveNext:function(){if(this._buffer.length>0)return this.current=this._buffer.shift(),!0;if(this._index>=this._input.length-1)return this.current=64,!1;var e=Base64.codex.indexOf(this._input.charAt(++this._index)),t=Base64.codex.indexOf(this._input.charAt(++this._index)),r=Base64.codex.indexOf(this._input.charAt(++this._index)),n=Base64.codex.indexOf(this._input.charAt(++this._index)),i=e<<2|t>>4,u=(15&t)<<4|r>>2,o=(3&r)<<6|n;return this.current=i,64!=r&&this._buffer.push(u),64!=n&&this._buffer.push(o),!0}};